# Домашнее задание к занятию "5.3. Контейнеризация на примере Docker"


 

> **Задача 1**
>
> **Посмотрите на сценарий ниже и ответьте на вопрос: "Подходит ли в этом сценарии использование докера? Или лучше подойдет виртуальная машина, физическая машина? Или возможны разные варианты?"**
>
> **Детально опишите и обоснуйте свой выбор.**
>
> \--
>
> ***Сценарий:***

**·     *Высконагруженное монолитное java веб-приложение;***

Как понимаю, здесь ключевое «высоконагруженное», для данных приложений не рекомендуется Docker, лучше «Виртуальная машина» со своим пулом ресурсов.

**·     *Go-микросервис для генерации отчетов;***

Для микросервисов как никах лучше подходит Docker, большое количество сервисов, не высокие требования с ресурсам.

 

**·     *Nodejs веб-приложение;***

Лучше подойдет Docker

 

**·     *Мобильное приложение c версиями для Android и iOS;***

Docker, быстрее развертывать, возможность простой новой компиляции «с нуля».

 

 **·     *База данных postgresql используемая, как кэш;***

Предполагаю, что Docker, так как нет требований к надежности хранения в отличии от полноценной БД. И её высокой производительности



**·     *Шина данных на базе Apache Kafka;***

На основании того, что прочитал по Apache Kafka, применяется Docker, если это кластер машин, если используется единственная машина, то выбор в сторону виртуальной машины.



**·     *Очередь для Logstash на базе Redis;***

Предполагаю, что Docker, если разделить процессы Redis от Logstash по отдельным контейнерам. Или если всю цепочку процессов нужно держать  в одной машине, то – виртуальная машина.



**·     *Elastic stack для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;***

Docker, каждый компонент в отдельном контейнере.



**·     *Мониторинг-стек на базе prometheus и grafana;***

Думаю, из-за требований к производительности, наличия базы данных здесь подойдет виртуальная машина (или физическая).



**·     *Mongodb, как основное хранилище данных для java-приложения;***

Так же из за требований к надежности хранения - виртуальная машина

 

**·     *Jenkins-сервер.***

Если не подразумевает других систем на тойже машине, то подойдет Docker



> **Задача 2**
>
> **Сценарий выполения задачи:**
>
> ·     *создайте свой репозиторий на докерхаб;*
>
>  
>
> *Читаем как использовать…. Делаем фром*
>
>  
>
> ·     *выберете любой образ, который содержит апачи веб-сервер;*
>
>  
>
>  
>
> ·     *создайте свой форк образа;*
>
>  
>
>  
>
> ·     *реализуйте функциональность: запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:*
>
> *<html>*
>
> *<head>*
>
> *Hey, Netology*
>
> *</head>*
>
> *<body>*
>
> *<h1>I’m kinda DevOps now</h1>*
>
> *</body>*
>
> *</html>*
>
> *Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на докерхаб-репо.*



Создал файл конфигурации: **~/****docker/****kaa-****httpd/Dockerfile**

*FROM httpd:2.4*

*COPY ./htdocs/index.html  /usr/local/apache2/htdocs/*

*RUN apt-get update*

*RUN apt-get install net-tools*

*RUN apt-get install curl*

 

**#docker build -t kaa-apache2 .**

*. - текущий* *каталог**, где* *проект*

**#docker run -p 8081:80 -dit kaa-apache3 httpd -DFOREGROUND "$@"**

*запустил контейнер, пробросил порт 8081 на хост.*

$@ - список аргументов, если добавить при вызове (сам не знаю до конца в каких случаях может понадобиться, взял из примера)

 

**\# docker images**

*REPOSITORY     TAG         IMAGE ID      CREATED       SIZE*

*kaa-apache2     latest       5ce735be85e0    23 minutes ago   158MB*

 

*нужно включить имя пользователя в тег*

**\#docker tag 5ce735be85e0 kaaa/kaa-apache2:latest**

 

*логинимся в реестре*

**\#docker login**

 *Отправляем образ в реестр*

**#docker push kaaa/kaa-apache2:latest**

 

Ссылка на размещенный образ: 

https://hub.docker.com/r/kaaa/kaa-apache2





> **Задача 3**
>
> **·     Запустите первый контейнер из образа centos c любым тэгом в фоновом режиме, подключив папку info из текущей рабочей директории на хостовой машине в /share/info контейнера;**



Создал ~/docker/info/



запустил первый контейнер  

**#docker run --name centos8-1 -v /root/docker/centos/info/:/share/info -dt centos:centos8 /bin/bash**



> ·     Запустите второй контейнер из образа debian:latest в фоновом режиме, подключив папку info из текущей рабочей директории на хостовой машине в /info контейнера;

 **# docker run --name debian-1 -v /root/docker/centos/info/:/info -dt debian:latest /bin/bash**



> ·     Подключитесь к первому контейнеру с помощью exec и создайте текстовый файл любого содержания в /share/info ;

 

**#docker exec centos8-1 touch /share/info/11111**

 

> ·     Добавьте еще один файл в папку info на хостовой машине;

 

**~/docker/centos/info# touch 22222**

 

> ·     Подключитесь во второй контейнер и отобразите листинг и содеражание файлов в /info контейнера.

**# docker exec debian-1 ls /info/**

*11111*

*22222*









